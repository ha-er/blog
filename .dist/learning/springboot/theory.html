<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>原理初探 | 哈儿博客</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/img/logo.jpg">
    <link rel="stylesheet" href="/css/base.css">
    <meta name="description" content="哈儿的学习博客">
    <link rel="preload" href="/assets/css/0.styles.ddd314f9.css" as="style">
    <link rel="preload" href="/assets/js/app.6dee105b.js" as="script">
    <link rel="preload" href="/assets/js/2.aa41c1d8.js" as="script">
    <link rel="preload" href="/assets/js/19.4de0eb66.js" as="script">
    <link rel="prefetch" href="/assets/js/10.bdf0e11c.js">
    <link rel="prefetch" href="/assets/js/11.8861593f.js">
    <link rel="prefetch" href="/assets/js/12.761ad3f4.js">
    <link rel="prefetch" href="/assets/js/13.68f258e2.js">
    <link rel="prefetch" href="/assets/js/14.f2896015.js">
    <link rel="prefetch" href="/assets/js/15.99c10892.js">
    <link rel="prefetch" href="/assets/js/16.d4582f36.js">
    <link rel="prefetch" href="/assets/js/17.14810765.js">
    <link rel="prefetch" href="/assets/js/18.2a18556d.js">
    <link rel="prefetch" href="/assets/js/20.0086f86c.js">
    <link rel="prefetch" href="/assets/js/21.f16c6da5.js">
    <link rel="prefetch" href="/assets/js/22.fe645c57.js">
    <link rel="prefetch" href="/assets/js/23.d409c523.js">
    <link rel="prefetch" href="/assets/js/24.55a8afa8.js">
    <link rel="prefetch" href="/assets/js/25.f09353df.js">
    <link rel="prefetch" href="/assets/js/26.98288320.js">
    <link rel="prefetch" href="/assets/js/27.7bfef96f.js">
    <link rel="prefetch" href="/assets/js/28.f29988fb.js">
    <link rel="prefetch" href="/assets/js/29.57882d5d.js">
    <link rel="prefetch" href="/assets/js/3.bbc7260b.js">
    <link rel="prefetch" href="/assets/js/30.dffa19f7.js">
    <link rel="prefetch" href="/assets/js/31.586b847b.js">
    <link rel="prefetch" href="/assets/js/32.8325d4cd.js">
    <link rel="prefetch" href="/assets/js/33.3c035a03.js">
    <link rel="prefetch" href="/assets/js/34.424f911e.js">
    <link rel="prefetch" href="/assets/js/35.a37713e6.js">
    <link rel="prefetch" href="/assets/js/36.f9f1329a.js">
    <link rel="prefetch" href="/assets/js/37.5f4c6182.js">
    <link rel="prefetch" href="/assets/js/38.2a8cf1cf.js">
    <link rel="prefetch" href="/assets/js/39.8f45efd2.js">
    <link rel="prefetch" href="/assets/js/4.3a3e52ab.js">
    <link rel="prefetch" href="/assets/js/40.32ae9afb.js">
    <link rel="prefetch" href="/assets/js/41.5334f6b8.js">
    <link rel="prefetch" href="/assets/js/42.18be8ae3.js">
    <link rel="prefetch" href="/assets/js/43.638ee813.js">
    <link rel="prefetch" href="/assets/js/44.adca917e.js">
    <link rel="prefetch" href="/assets/js/45.94bbb398.js">
    <link rel="prefetch" href="/assets/js/46.3d6b1cb2.js">
    <link rel="prefetch" href="/assets/js/47.40f07088.js">
    <link rel="prefetch" href="/assets/js/48.60e0ddc1.js">
    <link rel="prefetch" href="/assets/js/49.df81aa51.js">
    <link rel="prefetch" href="/assets/js/5.9e53bb29.js">
    <link rel="prefetch" href="/assets/js/50.32c50c13.js">
    <link rel="prefetch" href="/assets/js/51.b9de2d64.js">
    <link rel="prefetch" href="/assets/js/52.d9bc370b.js">
    <link rel="prefetch" href="/assets/js/53.07251660.js">
    <link rel="prefetch" href="/assets/js/54.6add7e0d.js">
    <link rel="prefetch" href="/assets/js/6.92a93642.js">
    <link rel="prefetch" href="/assets/js/7.1134561d.js">
    <link rel="prefetch" href="/assets/js/8.e7adf247.js">
    <link rel="prefetch" href="/assets/js/9.a5d9b8be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ddd314f9.css">
</head>
<body>
<div id="app" data-server-rendered="true">
    <div class="theme-container">
        <header class="navbar">
            <div class="sidebar-button">
                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"
                     class="icon">
                    <path fill="currentColor"
                          d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
                </svg>
            </div>
            <a href="/" class="home-link router-link-active"><!----> <span class="site-name">哈儿博客</span></a>
            <div class="links">
                <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="">
                    <!----></div>
                <nav class="nav-links can-hide">
                    <div class="nav-item">
                        <div class="dropdown-wrapper">
                            <button type="button" aria-label="框架学习" class="dropdown-title"><span
                                    class="title">框架学习</span> <span class="arrow down"></span></button>
                            <button type="button" aria-label="框架学习" class="mobile-dropdown-title"><span class="title">框架学习</span>
                                <span class="arrow right"></span></button>
                            <ul class="nav-dropdown" style="display:none;">
                                <li class="dropdown-item"><h4>
                                    后端
                                </h4>
                                    <ul class="dropdown-subitem-wrapper">
                                        <li class="dropdown-subitem"><a href="/learning/mybatis/introduce.html"
                                                                        class="nav-link">
                                            Mybatis
                                        </a></li>
                                        <li class="dropdown-subitem"><a href="/learning/spring/introduction.html"
                                                                        class="nav-link">
                                            Spring
                                        </a></li>
                                        <li class="dropdown-subitem"><a href="/learning/springmvc/review.html"
                                                                        class="nav-link">
                                            SpringMVC
                                        </a></li>
                                        <li class="dropdown-subitem"><a href="/learning/springboot/introduction.html"
                                                                        class="nav-link">
                                            SpringBoot
                                        </a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="nav-item">
                        <div class="dropdown-wrapper">
                            <button type="button" aria-label="基础学习" class="dropdown-title"><span
                                    class="title">基础学习</span> <span class="arrow down"></span></button>
                            <button type="button" aria-label="基础学习" class="mobile-dropdown-title"><span class="title">基础学习</span>
                                <span class="arrow right"></span></button>
                            <ul class="nav-dropdown" style="display:none;">
                                <li class="dropdown-item"><h4>
                                    后端
                                </h4>
                                    <ul class="dropdown-subitem-wrapper">
                                        <li class="dropdown-subitem"><a href="/base/java/introduction/dataType.html"
                                                                        class="nav-link">
                                            JAVA
                                        </a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="nav-item"><a href="/oneself/" class="nav-link">
                        关于作者
                    </a></div>
                    <div class="nav-item"><a href="/friends/" class="nav-link">
                        友链
                    </a></div>
                    <div class="nav-item"><a href="/tools/" class="nav-link">
                        工具安装
                    </a></div>
                    <div class="nav-item">
                        <div class="dropdown-wrapper">
                            <button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span>
                                <span class="arrow down"></span></button>
                            <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span
                                    class="title">工具箱</span> <span class="arrow right"></span></button>
                            <ul class="nav-dropdown" style="display:none;">
                                <li class="dropdown-item"><h4>
                                    通用
                                </h4>
                                    <ul class="dropdown-subitem-wrapper">
                                        <li class="dropdown-subitem"><a href="https://www.processon.com/"
                                                                        target="_blank" rel="noopener noreferrer"
                                                                        class="nav-link external">
                                            在线画图
                                            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px"
                                                 viewBox="0 0 100 100" width="15" height="15" class="icon outbound">
                                                <path fill="currentColor"
                                                      d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path>
                                                <polygon fill="currentColor"
                                                         points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon>
                                            </svg>
                                        </a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-item"><h4>
                                    学习
                                </h4>
                                    <ul class="dropdown-subitem-wrapper">
                                        <li class="dropdown-subitem"><a href="https://regex101.com/" target="_blank"
                                                                        rel="noopener noreferrer"
                                                                        class="nav-link external">
                                            在线正则
                                            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px"
                                                 viewBox="0 0 100 100" width="15" height="15" class="icon outbound">
                                                <path fill="currentColor"
                                                      d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path>
                                                <polygon fill="currentColor"
                                                         points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon>
                                            </svg>
                                        </a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div> <!----></nav>
            </div>
        </header>
        <div class="sidebar-mask"></div>
        <aside class="sidebar">
            <nav class="nav-links">
                <div class="nav-item">
                    <div class="dropdown-wrapper">
                        <button type="button" aria-label="框架学习" class="dropdown-title"><span class="title">框架学习</span>
                            <span class="arrow down"></span></button>
                        <button type="button" aria-label="框架学习" class="mobile-dropdown-title"><span
                                class="title">框架学习</span> <span class="arrow right"></span></button>
                        <ul class="nav-dropdown" style="display:none;">
                            <li class="dropdown-item"><h4>
                                后端
                            </h4>
                                <ul class="dropdown-subitem-wrapper">
                                    <li class="dropdown-subitem"><a href="/learning/mybatis/introduce.html"
                                                                    class="nav-link">
                                        Mybatis
                                    </a></li>
                                    <li class="dropdown-subitem"><a href="/learning/spring/introduction.html"
                                                                    class="nav-link">
                                        Spring
                                    </a></li>
                                    <li class="dropdown-subitem"><a href="/learning/springmvc/review.html"
                                                                    class="nav-link">
                                        SpringMVC
                                    </a></li>
                                    <li class="dropdown-subitem"><a href="/learning/springboot/introduction.html"
                                                                    class="nav-link">
                                        SpringBoot
                                    </a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item">
                    <div class="dropdown-wrapper">
                        <button type="button" aria-label="基础学习" class="dropdown-title"><span class="title">基础学习</span>
                            <span class="arrow down"></span></button>
                        <button type="button" aria-label="基础学习" class="mobile-dropdown-title"><span
                                class="title">基础学习</span> <span class="arrow right"></span></button>
                        <ul class="nav-dropdown" style="display:none;">
                            <li class="dropdown-item"><h4>
                                后端
                            </h4>
                                <ul class="dropdown-subitem-wrapper">
                                    <li class="dropdown-subitem"><a href="/base/java/introduction/dataType.html"
                                                                    class="nav-link">
                                        JAVA
                                    </a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item"><a href="/oneself/" class="nav-link">
                    关于作者
                </a></div>
                <div class="nav-item"><a href="/friends/" class="nav-link">
                    友链
                </a></div>
                <div class="nav-item"><a href="/tools/" class="nav-link">
                    工具安装
                </a></div>
                <div class="nav-item">
                    <div class="dropdown-wrapper">
                        <button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span>
                            <span class="arrow down"></span></button>
                        <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span
                                class="title">工具箱</span> <span class="arrow right"></span></button>
                        <ul class="nav-dropdown" style="display:none;">
                            <li class="dropdown-item"><h4>
                                通用
                            </h4>
                                <ul class="dropdown-subitem-wrapper">
                                    <li class="dropdown-subitem"><a href="https://www.processon.com/" target="_blank"
                                                                    rel="noopener noreferrer" class="nav-link external">
                                        在线画图
                                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px"
                                             viewBox="0 0 100 100" width="15" height="15" class="icon outbound">
                                            <path fill="currentColor"
                                                  d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path>
                                            <polygon fill="currentColor"
                                                     points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon>
                                        </svg>
                                    </a></li>
                                </ul>
                            </li>
                            <li class="dropdown-item"><h4>
                                学习
                            </h4>
                                <ul class="dropdown-subitem-wrapper">
                                    <li class="dropdown-subitem"><a href="https://regex101.com/" target="_blank"
                                                                    rel="noopener noreferrer" class="nav-link external">
                                        在线正则
                                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px"
                                             viewBox="0 0 100 100" width="15" height="15" class="icon outbound">
                                            <path fill="currentColor"
                                                  d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path>
                                            <polygon fill="currentColor"
                                                     points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon>
                                        </svg>
                                    </a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div> <!----></nav>
            <ul class="sidebar-links">
                <li>
                    <section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open">
                        <span>SpringBoot</span> <span class="arrow down"></span></p>
                        <ul class="sidebar-links sidebar-group-items">
                            <li><a href="/learning/springboot/introduction.html" class="sidebar-link">简介</a></li>
                            <li><a href="/learning/springboot/helloWorld.html" class="sidebar-link">HelloWorld</a></li>
                            <li><a href="/learning/springboot/theory.html" aria-current="page"
                                   class="active sidebar-link">原理初探</a>
                                <ul class="sidebar-sub-headers">
                                    <li class="sidebar-sub-header"><a href="/learning/springboot/theory.html#pom-xml"
                                                                      class="sidebar-link">pom.xml</a></li>
                                    <li class="sidebar-sub-header"><a href="/learning/springboot/theory.html#启动器"
                                                                      class="sidebar-link">启动器</a></li>
                                    <li class="sidebar-sub-header"><a href="/learning/springboot/theory.html#主程序"
                                                                      class="sidebar-link">主程序</a></li>
                                    <li class="sidebar-sub-header"><a href="/learning/springboot/theory.html#run"
                                                                      class="sidebar-link">Run</a></li>
                                </ul>
                            </li>
                            <li><a href="/learning/springboot/yaml.html" class="sidebar-link">yaml</a></li>
                        </ul>
                    </section>
                </li>
            </ul>
        </aside>
        <main class="page">
            <div class="theme-default-content content__default"><h1 id="原理初探"><a href="#原理初探"
                                                                                 class="header-anchor">#</a> 原理初探</h1>
                <p>自动配置：</p>
                <h2 id="pom-xml"><a href="#pom-xml" class="header-anchor">#</a> pom.xml</h2>
                <ul>
                    <li>在<code>spring-boot-starter-parent</code>中，发现里面已经帮我们做了资源过滤</li>
                </ul>
                <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span
                        class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span
              class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span
                class="token punctuation">&gt;</span></span>${basedir}/src/main/resources<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span
                            class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span
                class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>filtering</span><span
                            class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span
                class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span
                  class="token punctuation">&gt;</span></span>**/application*.yml<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>include</span><span
                            class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span
                  class="token punctuation">&gt;</span></span>**/application*.yaml<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>include</span><span
                            class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span
                  class="token punctuation">&gt;</span></span>**/application*.properties<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>include</span><span
                            class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span
                class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span
              class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span
              class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span
                class="token punctuation">&gt;</span></span>${basedir}/src/main/resources<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span
                            class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span
                class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span
                  class="token punctuation">&gt;</span></span>**/application*.yml<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span
                            class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span
                  class="token punctuation">&gt;</span></span>**/application*.yaml<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span
                            class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span
                  class="token punctuation">&gt;</span></span>**/application*.properties<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span
                            class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span
                class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span
              class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span
            class="token punctuation">&gt;</span></span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                            class="line-number">10</span><br><span class="line-number">11</span><br><span
                            class="line-number">12</span><br><span class="line-number">13</span><br><span
                            class="line-number">14</span><br><span class="line-number">15</span><br><span
                            class="line-number">16</span><br><span class="line-number">17</span><br><span
                            class="line-number">18</span><br><span class="line-number">19</span><br></div>
                </div>
                <ul>
                    <li>在<code>spring-boot-starter-parent</code>中有一个<code>spring-boot-dependencies</code>，发现里面的<code>properties</code>标签中有大量的控制版本的信息，
                        所以很多都不需要我们手动指定版本
                    </li>
                </ul>
                <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span
                        class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>activemq.version</span><span
            class="token punctuation">&gt;</span></span>5.15.13<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>activemq.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>antlr2.version</span><span class="token punctuation">&gt;</span></span>2.7.7<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>antlr2.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>appengine-sdk.version</span><span class="token punctuation">&gt;</span></span>1.9.81<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appengine-sdk.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>artemis.version</span><span
            class="token punctuation">&gt;</span></span>2.12.0<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>artemis.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>aspectj.version</span><span
            class="token punctuation">&gt;</span></span>1.9.6<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>aspectj.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>assertj.version</span><span
            class="token punctuation">&gt;</span></span>3.16.1<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>assertj.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>atomikos.version</span><span
            class="token punctuation">&gt;</span></span>4.0.6<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>atomikos.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>awaitility.version</span><span
            class="token punctuation">&gt;</span></span>4.0.3<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>awaitility.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>bitronix.version</span><span
            class="token punctuation">&gt;</span></span>2.1.4<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>bitronix.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build-helper-maven-plugin.version</span><span
            class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>build-helper-maven-plugin.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>byte-buddy.version</span><span
            class="token punctuation">&gt;</span></span>1.10.14<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>byte-buddy.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>caffeine.version</span><span
            class="token punctuation">&gt;</span></span>2.8.5<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>caffeine.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cassandra-driver.version</span><span
            class="token punctuation">&gt;</span></span>4.6.1<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>cassandra-driver.version</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span
            class="token punctuation">&lt;</span>classmate.version</span><span
            class="token punctuation">&gt;</span></span>1.5.1<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>classmate.version</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--.....还有很多。。。    --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span
        class="token punctuation">&gt;</span></span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                            class="line-number">10</span><br><span class="line-number">11</span><br><span
                            class="line-number">12</span><br><span class="line-number">13</span><br><span
                            class="line-number">14</span><br><span class="line-number">15</span><br><span
                            class="line-number">16</span><br><span class="line-number">17</span><br></div>
                </div>
                <h2 id="启动器"><a href="#启动器" class="header-anchor">#</a> 启动器</h2>
                <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span
                        class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span
           class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span
                            class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span
           class="token punctuation">&gt;</span></span>spring-boot-starter-xxx<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span
        class="token punctuation">&gt;</span></span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br></div>
                </div>
                <ul>
                    <li>启动器：说白了就是SpringBoot的启动场景</li>
                    <li>比如<code>spring-boot-starter-web</code>，它就会帮我们自动导入web环境的所有依赖</li>
                    <li>SpringBoot会将所有功能场景，都变成一个个的启动器</li>
                    <li>我们要使用上面功能，只需要找到对应的启动器就可以了，可以去<a
                            href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter"
                            target="_blank" rel="noopener noreferrer">官方文档
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100"
                             width="15" height="15" class="icon outbound">
                            <path fill="currentColor"
                                  d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path>
                            <polygon fill="currentColor"
                                     points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon>
                        </svg>
                    </a>寻找
                    </li>
                </ul>
                <h2 id="主程序"><a href="#主程序" class="header-anchor">#</a> 主程序</h2>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token annotation punctuation">@SpringBootApplication</span><span class="token comment">//标注这个类是一个SpringBoot的应用:启动类下的所有资源被导入</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot01Application</span> <span
                            class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span
                            class="token keyword">void</span> <span class="token function">main</span><span
                            class="token punctuation">(</span><span class="token class-name">String</span><span
                            class="token punctuation">[</span><span class="token punctuation">]</span> args<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//将SpringBoot应用启动</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span
                            class="token function">run</span><span class="token punctuation">(</span><span
                            class="token class-name">Springboot01Application</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">,</span> args<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br></div>
                </div>
                <p><strong>注解</strong></p>
                <blockquote><p>@SpringBootApplication：启动器注解介绍</p>
                    <blockquote><p>@ComponentScan：扫描主启动类同级的包</p>
                        <blockquote></blockquote>
                        <p>@SpringBootConfiguration：SpringBoot的配置</p>
                        <blockquote><p>@Configuration：Spring配置类</p>
                            <blockquote><p>@Component：说明这也是一个Spring的组件</p></blockquote>
                        </blockquote>
                        <p>@EnableAutoConfiguration：自动配置</p>
                        <blockquote><p>@AutoConfigurationPackage：自动配置包</p>
                            <blockquote><p>
                                @Import(AutoConfigurationPackages.Registrar.class)：自动配置包注册，将@ComponentScan扫描的包在这里注册</p>
                                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                                        class="token keyword">static</span> <span
                                        class="token keyword">class</span> <span
                                        class="token class-name">Registrar</span> <span
                                        class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span><span
                                        class="token punctuation">,</span> <span class="token class-name">DeterminableImports</span> <span
                                        class="token punctuation">{</span>
  <span class="token comment">//获得配置包元数据</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span
                                            class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span
                                            class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span
                                            class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">register</span><span class="token punctuation">(</span>registry<span
                                            class="token punctuation">,</span> <span
                                            class="token keyword">new</span> <span class="token class-name">PackageImports</span><span
                                            class="token punctuation">(</span>metadata<span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">.</span><span class="token function">getPackageNames</span><span
                                            class="token punctuation">(</span><span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">.</span><span
                                            class="token function">toArray</span><span
                                            class="token punctuation">(</span><span
                                            class="token keyword">new</span> <span
                                            class="token class-name">String</span><span
                                            class="token punctuation">[</span><span class="token number">0</span><span
                                            class="token punctuation">]</span><span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
     
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span
                                            class="token punctuation">&lt;</span><span
                                            class="token class-name">Object</span><span
                                            class="token punctuation">&gt;</span></span> <span class="token function">determineImports</span><span
                                            class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span
                                            class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Collections</span><span
                                            class="token punctuation">.</span><span
                                            class="token function">singleton</span><span
                                            class="token punctuation">(</span><span
                                            class="token keyword">new</span> <span class="token class-name">PackageImports</span><span
                                            class="token punctuation">(</span>metadata<span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre>
                                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                                            class="line-number">10</span><br><span
                                            class="line-number">11</span><br><span class="line-number">12</span><br>
                                    </div>
                                </div>
                            </blockquote>
                            <p>@Import(AutoConfigurationImportSelector.class)：自动配置导入选择</p>
                            <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                                    class="token keyword">public</span> <span class="token keyword">class</span> <span
                                    class="token class-name">AutoConfigurationImportSelector</span> <span
                                    class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span><span
                                    class="token punctuation">,</span> <span class="token class-name">BeanClassLoaderAware</span><span
                                    class="token punctuation">,</span>
	<span class="token class-name">ResourceLoaderAware</span><span class="token punctuation">,</span> <span
                                        class="token class-name">BeanFactoryAware</span><span class="token punctuation">,</span> <span
                                        class="token class-name">EnvironmentAware</span><span class="token punctuation">,</span> <span
                                        class="token class-name">Ordered</span> <span class="token punctuation">{</span>
  <span class="token comment">//当前类加载器</span>
  <span class="token keyword">private</span> <span class="token class-name">ClassLoader</span> beanClassLoader<span
                                        class="token punctuation">;</span>
  <span class="token comment">//选择在pom.xml中配置的组件，加载元数据</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span
                                        class="token punctuation">]</span> <span
                                        class="token function">selectImports</span><span
                                        class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span
                                        class="token operator">!</span><span
                                        class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span
                                        class="token punctuation">)</span><span class="token punctuation">)</span> <span
                                        class="token punctuation">{</span>
	  <span class="token keyword">return</span> NO_IMPORTS<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">AutoConfigurationEntry</span> autoConfigurationEntry <span
                                        class="token operator">=</span> <span class="token function">getAutoConfigurationEntry</span><span
                                        class="token punctuation">(</span>annotationMetadata<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token class-name">StringUtils</span><span
                                        class="token punctuation">.</span><span
                                        class="token function">toStringArray</span><span
                                        class="token punctuation">(</span>autoConfigurationEntry<span
                                        class="token punctuation">.</span><span
                                        class="token function">getConfigurations</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//获得自动配置实体</span>
  <span class="token keyword">protected</span> <span class="token class-name">AutoConfigurationEntry</span> <span
                                        class="token function">getAutoConfigurationEntry</span><span
                                        class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span
                                        class="token operator">!</span><span
                                        class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span
                                        class="token punctuation">)</span><span class="token punctuation">)</span> <span
                                        class="token punctuation">{</span>
	  <span class="token keyword">return</span> EMPTY_ENTRY<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">AnnotationAttributes</span> attributes <span class="token operator">=</span> <span
                                        class="token function">getAttributes</span><span
                                        class="token punctuation">(</span>annotationMetadata<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//获得所有配置</span>
	<span class="token class-name">List</span><span class="token generics"><span
                                        class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">&gt;</span></span> configurations <span
                                        class="token operator">=</span> <span class="token function">getCandidateConfigurations</span><span
                                        class="token punctuation">(</span>annotationMetadata<span
                                        class="token punctuation">,</span> attributes<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	configurations <span class="token operator">=</span> <span class="token function">removeDuplicates</span><span
                                        class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span
                                        class="token punctuation">;</span>
	<span class="token class-name">Set</span><span class="token generics"><span
                                        class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">&gt;</span></span> exclusions <span
                                        class="token operator">=</span> <span
                                        class="token function">getExclusions</span><span
                                        class="token punctuation">(</span>annotationMetadata<span
                                        class="token punctuation">,</span> attributes<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">checkExcludedClasses</span><span class="token punctuation">(</span>configurations<span
                                        class="token punctuation">,</span> exclusions<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	configurations<span class="token punctuation">.</span><span class="token function">removeAll</span><span
                                        class="token punctuation">(</span>exclusions<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	configurations <span class="token operator">=</span> <span class="token function">getConfigurationClassFilter</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">.</span><span
                                        class="token function">filter</span><span class="token punctuation">(</span>configurations<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">fireAutoConfigurationImportEvents</span><span class="token punctuation">(</span>configurations<span
                                        class="token punctuation">,</span> exclusions<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationEntry</span><span
                                        class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//调用了此方法，获取候选的配置</span>
  <span class="token keyword">protected</span> <span class="token class-name">List</span><span
                                        class="token generics"><span class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">&gt;</span></span> <span class="token function">getCandidateConfigurations</span><span
                                        class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span
                                        class="token punctuation">,</span> <span class="token class-name">AnnotationAttributes</span> attributes<span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//调用加载工厂名称方法loadFactoryNames()</span>
	<span class="token class-name">List</span><span class="token generics"><span
                                        class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">&gt;</span></span> configurations <span
                                        class="token operator">=</span> <span class="token class-name">SpringFactoriesLoader</span><span
                                        class="token punctuation">.</span><span
                                        class="token function">loadFactoryNames</span><span
                                        class="token punctuation">(</span><span class="token function">getSpringFactoriesLoaderFactoryClass</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">,</span>
				<span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span
                                        class="token punctuation">)</span><span class="token punctuation">)</span><span
                                        class="token punctuation">;</span>
	<span class="token comment">//判断configurations不为空，后面是为空时，的报错信息。我们可以猜测自动配置包，是从META-INF/spring.factories拿到的</span>
	<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span
                                        class="token punctuation">(</span>configurations<span class="token punctuation">,</span> <span
                                        class="token string">&quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;</span>
			<span class="token operator">+</span> <span class="token string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span><span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> configurations<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 
  <span class="token keyword">protected</span> <span class="token class-name">Class</span><span
                                        class="token generics"><span class="token punctuation">&lt;</span><span
                                        class="token operator">?</span><span
                                        class="token punctuation">&gt;</span></span> <span class="token function">getSpringFactoriesLoaderFactoryClass</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                        class="token punctuation">{</span>
    <span class="token comment">//获得标注了这个类的所有包和配置，上面启动类进去第二个注解就是@EnableAutoConfiguration，</span>
    <span class="token comment">// 也就是获取了主启动类</span>
 	<span class="token keyword">return</span> <span class="token class-name">EnableAutoConfiguration</span><span
                                        class="token punctuation">.</span><span class="token keyword">class</span><span
                                        class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//获取当前类加载器</span>
  <span class="token keyword">protected</span> <span class="token class-name">ClassLoader</span> <span
                                        class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token keyword">return</span> <span class="token keyword">this</span><span
                                        class="token punctuation">.</span>beanClassLoader<span
                                        class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                                <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                                        class="line-number">2</span><br><span class="line-number">3</span><br><span
                                        class="line-number">4</span><br><span class="line-number">5</span><br><span
                                        class="line-number">6</span><br><span class="line-number">7</span><br><span
                                        class="line-number">8</span><br><span class="line-number">9</span><br><span
                                        class="line-number">10</span><br><span class="line-number">11</span><br><span
                                        class="line-number">12</span><br><span class="line-number">13</span><br><span
                                        class="line-number">14</span><br><span class="line-number">15</span><br><span
                                        class="line-number">16</span><br><span class="line-number">17</span><br><span
                                        class="line-number">18</span><br><span class="line-number">19</span><br><span
                                        class="line-number">20</span><br><span class="line-number">21</span><br><span
                                        class="line-number">22</span><br><span class="line-number">23</span><br><span
                                        class="line-number">24</span><br><span class="line-number">25</span><br><span
                                        class="line-number">26</span><br><span class="line-number">27</span><br><span
                                        class="line-number">28</span><br><span class="line-number">29</span><br><span
                                        class="line-number">30</span><br><span class="line-number">31</span><br><span
                                        class="line-number">32</span><br><span class="line-number">33</span><br><span
                                        class="line-number">34</span><br><span class="line-number">35</span><br><span
                                        class="line-number">36</span><br><span class="line-number">37</span><br><span
                                        class="line-number">38</span><br><span class="line-number">39</span><br><span
                                        class="line-number">40</span><br><span class="line-number">41</span><br><span
                                        class="line-number">42</span><br><span class="line-number">43</span><br><span
                                        class="line-number">44</span><br><span class="line-number">45</span><br><span
                                        class="line-number">46</span><br><span class="line-number">47</span><br><span
                                        class="line-number">48</span><br><span class="line-number">49</span><br><span
                                        class="line-number">50</span><br></div>
                            </div>
                            <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span
                                    class="token keyword">public</span> <span class="token keyword">final</span> <span
                                    class="token keyword">class</span> <span class="token class-name">SpringFactoriesLoader</span> <span
                                    class="token punctuation">{</span>
   <span class="token comment">//前面猜测加载的是META-INF/spring.factories配置文件，确实是在这里加载了</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span
                                        class="token keyword">final</span> <span class="token class-name">String</span> FACTORIES_RESOURCE_LOCATION <span
                                        class="token operator">=</span> <span class="token string">&quot;META-INF/spring.factories&quot;</span><span
                                        class="token punctuation">;</span>
   <span class="token comment">//获取所有的加载配置，factoryType：加载标注了@SpringBootApplication的启动类</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span
                                        class="token generics"><span class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">&gt;</span></span> <span class="token function">loadFactoryNames</span><span
                                        class="token punctuation">(</span><span
                                        class="token class-name">Class</span><span class="token generics"><span
                                        class="token punctuation">&lt;</span><span class="token operator">?</span><span
                                        class="token punctuation">&gt;</span></span> factoryType<span
                                        class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span
                                        class="token class-name">ClassLoader</span> classLoader<span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">//获取类的名字</span>
     <span class="token class-name">String</span> factoryTypeName <span class="token operator">=</span> factoryType<span
                                        class="token punctuation">.</span><span
                                        class="token function">getName</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">;</span>
     <span class="token comment">//Collections：获取默认的包名：判断不为空</span>
     <span class="token keyword">return</span> <span class="token function">loadSpringFactories</span><span
                                        class="token punctuation">(</span>classLoader<span
                                        class="token punctuation">)</span><span class="token punctuation">.</span><span
                                        class="token function">getOrDefault</span><span
                                        class="token punctuation">(</span>factoryTypeName<span
                                        class="token punctuation">,</span> <span
                                        class="token class-name">Collections</span><span
                                        class="token punctuation">.</span><span
                                        class="token function">emptyList</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span
                                        class="token generics"><span class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">,</span> <span
                                        class="token class-name">List</span><span
                                        class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span
                                        class="token function">loadSpringFactories</span><span
                                        class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span
                                        class="token class-name">ClassLoader</span> classLoader<span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token class-name">MultiValueMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span
                                        class="token class-name">String</span><span
                                        class="token punctuation">,</span> <span
                                        class="token class-name">String</span><span
                                        class="token punctuation">&gt;</span></span> result <span
                                        class="token operator">=</span> cache<span
                                        class="token punctuation">.</span><span class="token function">get</span><span
                                        class="token punctuation">(</span>classLoader<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span
                                        class="token keyword">null</span><span class="token punctuation">)</span> <span
                                        class="token punctuation">{</span>
     <span class="token keyword">return</span> result<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">try</span> <span class="token punctuation">{</span>
       <span class="token comment">//加载获取所有的项目资源和系统资源META-INF/spring.factories</span>
 	   <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span>URL<span
                                        class="token punctuation">&gt;</span></span> urls <span
                                        class="token operator">=</span> <span class="token punctuation">(</span>classLoader <span
                                        class="token operator">!=</span> <span class="token keyword">null</span> <span
                                        class="token operator">?</span>
 			classLoader<span class="token punctuation">.</span><span class="token function">getResources</span><span
                                        class="token punctuation">(</span>FACTORIES_RESOURCE_LOCATION<span
                                        class="token punctuation">)</span> <span class="token operator">:</span>
 			<span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span
                                        class="token function">getSystemResources</span><span class="token punctuation">(</span>FACTORIES_RESOURCE_LOCATION<span
                                        class="token punctuation">)</span><span class="token punctuation">)</span><span
                                        class="token punctuation">;</span>
 	   result <span class="token operator">=</span> <span class="token keyword">new</span> <span
                                        class="token class-name">LinkedMultiValueMap</span><span class="token generics"><span
                                        class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">;</span>
 	   <span class="token comment">//遍历了那些可以自动配置，hasMoreElements()：判断有没有更多的元素</span>
 	   <span class="token keyword">while</span> <span class="token punctuation">(</span>urls<span
                                        class="token punctuation">.</span><span
                                        class="token function">hasMoreElements</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
 	     <span class="token comment">//有的话就放到URL里面</span>
 	     <span class="token class-name">URL</span> url <span class="token operator">=</span> urls<span
                                        class="token punctuation">.</span><span
                                        class="token function">nextElement</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">;</span>
 	     <span class="token class-name">UrlResource</span> resource <span class="token operator">=</span> <span
                                        class="token keyword">new</span> <span
                                        class="token class-name">UrlResource</span><span
                                        class="token punctuation">(</span>url<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
 	     <span class="token comment">//把URL（所有的资源）加载到Properties配置类中，供我们使用</span>
 	     <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span
                                        class="token class-name">PropertiesLoaderUtils</span><span
                                        class="token punctuation">.</span><span
                                        class="token function">loadProperties</span><span
                                        class="token punctuation">(</span>resource<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
 	     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span
                                        class="token punctuation">.</span><span
                                        class="token class-name">Entry</span><span class="token generics"><span
                                        class="token punctuation">&lt;</span><span class="token operator">?</span><span
                                        class="token punctuation">,</span> <span class="token operator">?</span><span
                                        class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> properties<span
                                        class="token punctuation">.</span><span
                                        class="token function">entrySet</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
 	       <span class="token class-name">String</span> factoryTypeName <span class="token operator">=</span> <span
                                        class="token punctuation">(</span><span class="token punctuation">(</span><span
                                        class="token class-name">String</span><span class="token punctuation">)</span> entry<span
                                        class="token punctuation">.</span><span
                                        class="token function">getKey</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">)</span><span class="token punctuation">.</span><span
                                        class="token function">trim</span><span class="token punctuation">(</span><span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
 	       <span class="token keyword">for</span> <span class="token punctuation">(</span><span
                                        class="token class-name">String</span> factoryImplementationName <span
                                        class="token operator">:</span>
                    <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span
                                        class="token function">commaDelimitedListToStringArray</span><span
                                        class="token punctuation">(</span><span class="token punctuation">(</span><span
                                        class="token class-name">String</span><span class="token punctuation">)</span> entry<span
                                        class="token punctuation">.</span><span
                                        class="token function">getValue</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">)</span><span class="token punctuation">)</span> <span
                                        class="token punctuation">{</span>
 	         <span class="token comment">//循环放到result</span>
		     result<span class="token punctuation">.</span><span class="token function">add</span><span
                                        class="token punctuation">(</span>factoryTypeName<span
                                        class="token punctuation">,</span> factoryImplementationName<span
                                        class="token punctuation">.</span><span class="token function">trim</span><span
                                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
 	       <span class="token punctuation">}</span>
 	     <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
 	   <span class="token comment">//最后放到缓存中</span>
 	   cache<span class="token punctuation">.</span><span class="token function">put</span><span
                                        class="token punctuation">(</span>classLoader<span
                                        class="token punctuation">,</span> result<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
 	   <span class="token keyword">return</span> result<span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token keyword">catch</span> <span
                                        class="token punctuation">(</span><span
                                        class="token class-name">IOException</span> ex<span
                                        class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span
                                        class="token punctuation">(</span><span class="token string">&quot;Unable to load factories from location [&quot;</span> <span
                                        class="token operator">+</span>
 				FACTORIES_RESOURCE_LOCATION <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span
                                        class="token punctuation">,</span> ex<span
                                        class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                                <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                                        class="line-number">2</span><br><span class="line-number">3</span><br><span
                                        class="line-number">4</span><br><span class="line-number">5</span><br><span
                                        class="line-number">6</span><br><span class="line-number">7</span><br><span
                                        class="line-number">8</span><br><span class="line-number">9</span><br><span
                                        class="line-number">10</span><br><span class="line-number">11</span><br><span
                                        class="line-number">12</span><br><span class="line-number">13</span><br><span
                                        class="line-number">14</span><br><span class="line-number">15</span><br><span
                                        class="line-number">16</span><br><span class="line-number">17</span><br><span
                                        class="line-number">18</span><br><span class="line-number">19</span><br><span
                                        class="line-number">20</span><br><span class="line-number">21</span><br><span
                                        class="line-number">22</span><br><span class="line-number">23</span><br><span
                                        class="line-number">24</span><br><span class="line-number">25</span><br><span
                                        class="line-number">26</span><br><span class="line-number">27</span><br><span
                                        class="line-number">28</span><br><span class="line-number">29</span><br><span
                                        class="line-number">30</span><br><span class="line-number">31</span><br><span
                                        class="line-number">32</span><br><span class="line-number">33</span><br><span
                                        class="line-number">34</span><br><span class="line-number">35</span><br><span
                                        class="line-number">36</span><br><span class="line-number">37</span><br><span
                                        class="line-number">38</span><br><span class="line-number">39</span><br><span
                                        class="line-number">40</span><br><span class="line-number">41</span><br><span
                                        class="line-number">42</span><br><span class="line-number">43</span><br><span
                                        class="line-number">44</span><br><span class="line-number">45</span><br><span
                                        class="line-number">46</span><br><span class="line-number">47</span><br></div>
                            </div>
                            <p>找到<code>META-INF/spring.factories</code>，配置文件中配置126个<code>XXXAutoConfiguration</code>，都是SpringBoot帮我们自动配置的对应的类都在org目录下，比如Web的配置也是在里面
                                <img src="/assets/img/8.d72ee74a.png" alt="">
                                那么导入了这么多的配置，为什么需要导入各种<code>starter-xxx</code>来实现配置呢！
                                随意进入一个配置类，也是上面org目录的各种配置类,发现都带有<code>@ConditionalOnXXX</code>的注解，去判断该自动配置是否生效。所以只有当你去导入<code>starter-xxx</code>是，才会是自动配置生效
                            </p>
                            <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                                    class="token annotation punctuation">@ConditionalOnProperty</span><span
                                    class="token punctuation">(</span>prefix <span class="token operator">=</span> <span
                                    class="token string">&quot;spring.application.admin&quot;</span><span
                                    class="token punctuation">,</span> value <span class="token operator">=</span> <span
                                    class="token string">&quot;enabled&quot;</span><span
                                    class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span
                                    class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
	matchIfMissing <span class="token operator">=</span> <span class="token boolean">false</span><span
                                        class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringApplicationAdminJmxAutoConfiguration</span> <span
                                        class="token punctuation">{</span>
<span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre>
                                <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                                        class="line-number">2</span><br><span class="line-number">3</span><br><span
                                        class="line-number">4</span><br><span class="line-number">5</span><br></div>
                            </div>
                        </blockquote>
                    </blockquote>
                </blockquote>
                <div class="custom-block tip"><p class="custom-block-title">总结</p>
                    <p>SpringBoot所有自动配置都是在启动的时候扫描并加载<code>META-INF/spring.factories</code>配置文件，所有的配置类都在这里，但是不一定生效，
                        要判断条件是否成立，只要导入了对应的<code>starter</code>启动器，那么对应的自动配置就会生效，然后配置成功！</p>
                    <p>1、SpringBoot在启动的时候，从类路径下<code>META-INF/spring.factories</code>获取指定的值</p>
                    <p>2、将这些自动配置的类导入容器，自动配置就会生效，帮助我们配置，以前我们需要自己配置，但是现在也可以自定义配置</p>
                    <p>3、整合JavaEE，解决方案和自动配置的文件都在<code>spring-boot-autoconfigure-2.3.3.RELEASE.jar</code>这个包下</p>
                    <p>4、会把所有需要导入的组件，以类名的方式返回，这些组件就会被添加到容器中，存在非常多的<code>XXXAutoConfiguration</code>的文件（@Bean），
                        这些类给容器中导入了这个场景需要的所有组件，并自动配置(@Configuration)，免去了我们手动编写配置文件</p></div>
                <h2 id="run"><a href="#run" class="header-anchor">#</a> Run</h2>
                <p>run方法开启了一个服务</p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Springboot01Application</span> <span
                            class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span
                            class="token keyword">void</span> <span class="token function">main</span><span
                            class="token punctuation">(</span><span class="token class-name">String</span><span
                            class="token punctuation">[</span><span class="token punctuation">]</span> args<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//该方法返回了一个ConfigurableApplicationContext对象</span>
        <span class="token comment">//参数1：应用入口的类（也就是本类），参数2：命令行参数</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span
                            class="token function">run</span><span class="token punctuation">(</span><span
                            class="token class-name">Springboot01Application</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">,</span> args<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br></div>
                </div>
                <p><strong>SpringApplication</strong></p>
                <p>这个类的作用:</p>
                <ul>
                    <li>推断应用的类型是普通的项目还是Web项目</li>
                    <li>查找并加载所有可用的初始化器，设置到initializers属性中</li>
                    <li>找出所有的应用程序监听器，设置到listeners属性中</li>
                    <li>推断并设置main方法的定义类，找到运行的主类</li>
                </ul>
                <p><strong>查看构造器</strong></p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">public</span> <span class="token keyword">class</span> <span
                        class="token class-name">SpringApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">SpringApplication</span><span
                            class="token punctuation">(</span><span class="token class-name">ResourceLoader</span> resourceLoader<span
                            class="token punctuation">,</span> <span class="token class-name">Class</span><span
                            class="token generics"><span class="token punctuation">&lt;</span><span
                            class="token operator">?</span><span class="token punctuation">&gt;</span></span><span
                            class="token punctuation">.</span><span class="token punctuation">.</span><span
                            class="token punctuation">.</span> primarySources<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader <span
                            class="token operator">=</span> resourceLoader<span class="token punctuation">;</span>
		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span
                            class="token function">notNull</span><span
                            class="token punctuation">(</span>primarySources<span
                            class="token punctuation">,</span> <span class="token string">&quot;PrimarySources must not be null&quot;</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>primarySources <span
                            class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">LinkedHashSet</span><span class="token generics"><span
                            class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span
                            class="token punctuation">(</span><span class="token class-name">Arrays</span><span
                            class="token punctuation">.</span><span class="token function">asList</span><span
                            class="token punctuation">(</span>primarySources<span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType <span
                            class="token operator">=</span> <span
                            class="token class-name">WebApplicationType</span><span
                            class="token punctuation">.</span><span
                            class="token function">deduceFromClasspath</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token comment">//监听初始化</span>
		<span class="token function">setInitializers</span><span class="token punctuation">(</span><span
                            class="token punctuation">(</span><span class="token class-name">Collection</span><span
                            class="token punctuation">)</span> <span
                            class="token function">getSpringFactoriesInstances</span><span
                            class="token punctuation">(</span><span class="token class-name">ApplicationContextInitializer</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token comment">//找出监听器</span>
		<span class="token function">setListeners</span><span class="token punctuation">(</span><span
                            class="token punctuation">(</span><span class="token class-name">Collection</span><span
                            class="token punctuation">)</span> <span
                            class="token function">getSpringFactoriesInstances</span><span
                            class="token punctuation">(</span><span
                            class="token class-name">ApplicationListener</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass <span
                            class="token operator">=</span> <span
                            class="token function">deduceMainApplicationClass</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                            class="line-number">10</span><br><span class="line-number">11</span><br><span
                            class="line-number">12</span><br><span class="line-number">13</span><br></div>
                </div>
                <p><strong>RUN</strong></p>
                <p>此处转载自<a href="https://blog.csdn.net/scj1014/article/details/90614104" target="_blank"
                           rel="noopener noreferrer">原文
                    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100"
                         width="15" height="15" class="icon outbound">
                        <path fill="currentColor"
                              d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path>
                        <polygon fill="currentColor"
                                 points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon>
                    </svg>
                </a>，
                    以后有机会再来了解run方法具体实现
                </p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">public</span> <span class="token keyword">class</span> <span
                        class="token class-name">SpringApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">ConfigurableApplicationContext</span> <span
                            class="token function">run</span><span class="token punctuation">(</span><span
                            class="token class-name">String</span><span class="token punctuation">.</span><span
                            class="token punctuation">.</span><span class="token punctuation">.</span> args<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//&lt;1&gt;:</span>
		<span class="token class-name">StopWatch</span> stopWatch <span class="token operator">=</span> <span
                            class="token keyword">new</span> <span class="token class-name">StopWatch</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		stopWatch<span class="token punctuation">.</span><span class="token function">start</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token class-name">ConfigurableApplicationContext</span> context <span
                            class="token operator">=</span> <span class="token keyword">null</span><span
                            class="token punctuation">;</span>
		<span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span
                            class="token class-name">SpringBootExceptionReporter</span><span class="token punctuation">&gt;</span></span> exceptionReporters <span
                            class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">ArrayList</span><span class="token generics"><span
                            class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token function">configureHeadlessProperty</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token comment">//&lt;2&gt;:</span>
		<span class="token class-name">SpringApplicationRunListeners</span> listeners <span
                            class="token operator">=</span> <span class="token function">getRunListeners</span><span
                            class="token punctuation">(</span>args<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		listeners<span class="token punctuation">.</span><span class="token function">starting</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		
	<span class="token comment">//&lt;3&gt;:</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token class-name">ApplicationArguments</span> applicationArguments <span
                            class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">DefaultApplicationArguments</span><span
                            class="token punctuation">(</span>args<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
	
	<span class="token comment">//&lt;4&gt;:</span>
			<span class="token class-name">ConfigurableEnvironment</span> environment <span
                            class="token operator">=</span> <span class="token function">prepareEnvironment</span><span
                            class="token punctuation">(</span>listeners<span class="token punctuation">,</span> applicationArguments<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">configureIgnoreBeanInfo</span><span class="token punctuation">(</span>environment<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			
	<span class="token comment">//&lt;5&gt;:</span>
			<span class="token class-name">Banner</span> printedBanner <span class="token operator">=</span> <span
                            class="token function">printBanner</span><span class="token punctuation">(</span>environment<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			
	<span class="token comment">//&lt;6&gt;:</span>
			context <span class="token operator">=</span> <span
                            class="token function">createApplicationContext</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
			exceptionReporters <span class="token operator">=</span> <span class="token function">getSpringFactoriesInstances</span><span
                            class="token punctuation">(</span><span
                            class="token class-name">SpringBootExceptionReporter</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">,</span>
					<span class="token keyword">new</span> <span class="token class-name">Class</span><span
                            class="token punctuation">[</span><span class="token punctuation">]</span> <span
                            class="token punctuation">{</span> <span class="token class-name">ConfigurableApplicationContext</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span> <span
                            class="token punctuation">}</span><span class="token punctuation">,</span> context<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			
	<span class="token comment">//&lt;7&gt;:</span>
			<span class="token function">prepareContext</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">,</span> environment<span class="token punctuation">,</span> listeners<span
                            class="token punctuation">,</span> applicationArguments<span
                            class="token punctuation">,</span> printedBanner<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			
	<span class="token comment">//&lt;8&gt;:</span>
			<span class="token function">refreshContext</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			
	<span class="token comment">//&lt;9&gt;:</span>
			<span class="token function">afterRefresh</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">,</span> applicationArguments<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			stopWatch<span class="token punctuation">.</span><span class="token function">stop</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span
                            class="token punctuation">.</span>logStartupInfo<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">new</span> <span class="token class-name">StartupInfoLogger</span><span
                            class="token punctuation">(</span><span class="token keyword">this</span><span
                            class="token punctuation">.</span>mainApplicationClass<span
                            class="token punctuation">)</span><span class="token punctuation">.</span><span
                            class="token function">logStarted</span><span class="token punctuation">(</span><span
                            class="token function">getApplicationLog</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">,</span> stopWatch<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
	<span class="token comment">//&lt;10&gt;:</span>
			listeners<span class="token punctuation">.</span><span class="token function">started</span><span
                            class="token punctuation">(</span>context<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
			
	<span class="token comment">//&lt;11&gt;:</span>
			<span class="token function">callRunners</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">,</span> applicationArguments<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">,</span> ex<span class="token punctuation">,</span> exceptionReporters<span
                            class="token punctuation">,</span> listeners<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span
                            class="token class-name">IllegalStateException</span><span
                            class="token punctuation">(</span>ex<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token punctuation">}</span>

    <span class="token comment">//&lt;12&gt;:</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			listeners<span class="token punctuation">.</span><span class="token function">running</span><span
                            class="token punctuation">(</span>context<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">,</span> ex<span class="token punctuation">,</span> exceptionReporters<span
                            class="token punctuation">,</span> <span class="token keyword">null</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span
                            class="token class-name">IllegalStateException</span><span
                            class="token punctuation">(</span>ex<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
	<span class="token comment">//&lt;13&gt;:</span>
		<span class="token keyword">return</span> context<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                            class="line-number">10</span><br><span class="line-number">11</span><br><span
                            class="line-number">12</span><br><span class="line-number">13</span><br><span
                            class="line-number">14</span><br><span class="line-number">15</span><br><span
                            class="line-number">16</span><br><span class="line-number">17</span><br><span
                            class="line-number">18</span><br><span class="line-number">19</span><br><span
                            class="line-number">20</span><br><span class="line-number">21</span><br><span
                            class="line-number">22</span><br><span class="line-number">23</span><br><span
                            class="line-number">24</span><br><span class="line-number">25</span><br><span
                            class="line-number">26</span><br><span class="line-number">27</span><br><span
                            class="line-number">28</span><br><span class="line-number">29</span><br><span
                            class="line-number">30</span><br><span class="line-number">31</span><br><span
                            class="line-number">32</span><br><span class="line-number">33</span><br><span
                            class="line-number">34</span><br><span class="line-number">35</span><br><span
                            class="line-number">36</span><br><span class="line-number">37</span><br><span
                            class="line-number">38</span><br><span class="line-number">39</span><br><span
                            class="line-number">40</span><br><span class="line-number">41</span><br><span
                            class="line-number">42</span><br><span class="line-number">43</span><br><span
                            class="line-number">44</span><br><span class="line-number">45</span><br><span
                            class="line-number">46</span><br><span class="line-number">47</span><br><span
                            class="line-number">48</span><br><span class="line-number">49</span><br><span
                            class="line-number">50</span><br><span class="line-number">51</span><br><span
                            class="line-number">52</span><br><span class="line-number">53</span><br><span
                            class="line-number">54</span><br><span class="line-number">55</span><br><span
                            class="line-number">56</span><br><span class="line-number">57</span><br><span
                            class="line-number">58</span><br><span class="line-number">59</span><br><span
                            class="line-number">60</span><br><span class="line-number">61</span><br><span
                            class="line-number">62</span><br><span class="line-number">63</span><br><span
                            class="line-number">64</span><br><span class="line-number">65</span><br><span
                            class="line-number">66</span><br></div>
                </div>
                <p>下面我们逐一分析：
                    &lt;1&gt; : <code>StopWatch stopWatch = new StopWatch();</code></p>
                <div class="language- extra-class"><pre><code>   `stopWatch.start();`
</code></pre>
                </div>
                <p>这段代码功能很简单，创建一个StopWatch对象，开始记录run()启动过程时长；</p>
                <p>&lt;2&gt;: 先来看这个方法：<code>SpringApplicationRunListeners listeners = getRunListeners(args);</code></p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">public</span> <span class="token keyword">class</span> <span
                        class="token class-name">SpringApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SpringApplicationRunListeners</span> <span
                            class="token function">getRunListeners</span><span class="token punctuation">(</span><span
                            class="token class-name">String</span><span class="token punctuation">[</span><span
                            class="token punctuation">]</span> args<span class="token punctuation">)</span> <span
                            class="token punctuation">{</span>
		<span class="token class-name">Class</span><span class="token generics"><span
                            class="token punctuation">&lt;</span><span class="token operator">?</span><span
                            class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span
                            class="token punctuation">]</span> types <span class="token operator">=</span> <span
                            class="token keyword">new</span> <span class="token class-name">Class</span><span
                            class="token generics"><span class="token punctuation">&lt;</span><span
                            class="token operator">?</span><span class="token punctuation">&gt;</span></span><span
                            class="token punctuation">[</span><span class="token punctuation">]</span> <span
                            class="token punctuation">{</span> <span
                            class="token class-name">SpringApplication</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">,</span> <span class="token class-name">String</span><span
                            class="token punctuation">[</span><span class="token punctuation">]</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span> <span
                            class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplicationRunListeners</span><span
                            class="token punctuation">(</span>logger<span class="token punctuation">,</span> <span
                            class="token function">getSpringFactoriesInstances</span><span
                            class="token punctuation">(</span>
				<span class="token class-name">SpringApplicationRunListener</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">,</span> types<span class="token punctuation">,</span> <span
                            class="token keyword">this</span><span class="token punctuation">,</span> args<span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br></div>
                </div>
                <p>在这段代码里，我们又看见了熟悉的<code>getSpringFactoriesInstances()</code>,原理还是一样，就是<code>getSpringFactoriesInstances()</code>方法会从类路径下的
                    <code>META-INF/spring.factories</code>文件中找
                    对应<code>SpringApplicationRunListener</code>的全路径数组，并通过<code>createSpringFactoriesInstances()</code>
                    方法实例化成对象返回；</p>
                <p>再看<code>listeners.starting()</code>方法：</p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">class</span> <span
                        class="token class-name">SpringApplicationRunListeners</span> <span
                        class="token punctuation">{</span>
     <span class="token keyword">void</span> <span class="token function">starting</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span> <span
                            class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SpringApplicationRunListener</span> listener <span
                            class="token operator">:</span> <span class="token keyword">this</span><span
                            class="token punctuation">.</span>listeners<span class="token punctuation">)</span> <span
                            class="token punctuation">{</span>
			listener<span class="token punctuation">.</span><span class="token function">starting</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br></div>
                </div>
                <p>所以这个方法就是回调之前获得的所有<code>SpringApplicationRunListener</code>对象的<code>starting()</code>方法,启动监听。我们可以继续再深入看一下这个监听对象的其他方法：
                </p>
                <p>在这里插入图片描述</p>
                <p><img src="/assets/img/10.b297c1d5.png" alt=""></p>
                <p><code>SpringApplicationRunListener</code>接口中共有上面几个方法，这几个方法将会贯穿<code>run()</code>方法的运行。</p>
                <p>&lt;3&gt;:这个方法的作用也很简单，封装命令行参数。</p>
                <p>&lt;4&gt;: <code>ConfigurableEnvironment environment = prepareEnvironment(listeners,
                    applicationArguments)</code></p>
                <p>其实这是环境准备阶段，我们可以看一下它的实现过程：</p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">public</span> <span class="token keyword">class</span> <span
                        class="token class-name">SpringApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ConfigurableEnvironment</span> <span
                            class="token function">prepareEnvironment</span><span class="token punctuation">(</span>
			<span class="token class-name">SpringApplicationRunListeners</span> listeners<span
                            class="token punctuation">,</span>
			<span class="token class-name">ApplicationArguments</span> applicationArguments<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Create and configure the environment</span>
		<span class="token class-name">ConfigurableEnvironment</span> environment <span class="token operator">=</span> <span
                            class="token function">getOrCreateEnvironment</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">configureEnvironment</span><span class="token punctuation">(</span>environment<span
                            class="token punctuation">,</span> applicationArguments<span
                            class="token punctuation">.</span><span class="token function">getSourceArgs</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		listeners<span class="token punctuation">.</span><span class="token function">environmentPrepared</span><span
                            class="token punctuation">(</span>environment<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token function">bindToSpringApplication</span><span
                            class="token punctuation">(</span>environment<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span
                            class="token operator">!</span><span class="token keyword">this</span><span
                            class="token punctuation">.</span>isCustomEnvironment<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
			environment <span class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">EnvironmentConverter</span><span class="token punctuation">(</span><span
                            class="token function">getClassLoader</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span
                            class="token function">convertEnvironmentIfNecessary</span><span
                            class="token punctuation">(</span>environment<span class="token punctuation">,</span> <span
                            class="token function">deduceEnvironmentClass</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">ConfigurationPropertySources</span><span class="token punctuation">.</span><span
                            class="token function">attach</span><span class="token punctuation">(</span>environment<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> environment<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                            class="line-number">10</span><br><span class="line-number">11</span><br><span
                            class="line-number">12</span><br><span class="line-number">13</span><br><span
                            class="line-number">14</span><br><span class="line-number">15</span><br><span
                            class="line-number">16</span><br><span class="line-number">17</span><br></div>
                </div>
                <p>这个方法表示创建环境，并且<code>environment</code>的属性都会加载进来，包括<code>application.properties</code>和外部的属性配置，具体实现有兴趣的同学可以研究一下。
                    其中<code>listeners.environmentPrepared(environment)</code>方法表示环境准备完成</p>
                <p>&lt;5&gt;:功能为打印Banner，也可以自定义启动logo，比如在resources路径下创建一个banner.txt文件，将你想打印的图标放入其中</p>
                <p>&lt;6&gt;:创建<code>ApplicationContext</code>容器，根据类型决定是创建普通WEB容器还是REACTIVE容器还是普通Annotation的ioc容器</p>
                <p>&lt;7&gt;:<code>prepareContext(context, environment, listeners, applicationArguments,
                    printedBanner);</code></p>
                <p>这个方法的具体实现：</p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">public</span> <span class="token keyword">class</span> <span
                        class="token class-name">SpringApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">prepareContext</span><span
                            class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span
                            class="token punctuation">,</span>
			<span class="token class-name">ConfigurableEnvironment</span> environment<span
                            class="token punctuation">,</span> <span class="token class-name">SpringApplicationRunListeners</span> listeners<span
                            class="token punctuation">,</span>
			<span class="token class-name">ApplicationArguments</span> applicationArguments<span
                            class="token punctuation">,</span> <span class="token class-name">Banner</span> printedBanner<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
		context<span class="token punctuation">.</span><span class="token function">setEnvironment</span><span
                            class="token punctuation">(</span>environment<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token function">postProcessApplicationContext</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//7.1:</span>
		<span class="token function">applyInitializers</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//7.2:</span>
		listeners<span class="token punctuation">.</span><span class="token function">contextPrepared</span><span
                            class="token punctuation">(</span>context<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span
                            class="token keyword">this</span><span class="token punctuation">.</span>logStartupInfo<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">logStartupInfo</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">.</span><span class="token function">getParent</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span> <span
                            class="token operator">==</span> <span class="token keyword">null</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">logStartupProfileInfo</span><span
                            class="token punctuation">(</span>context<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// Add boot specific singleton beans</span>
		<span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory <span
                            class="token operator">=</span> context<span class="token punctuation">.</span><span
                            class="token function">getBeanFactory</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		beanFactory<span class="token punctuation">.</span><span class="token function">registerSingleton</span><span
                            class="token punctuation">(</span><span class="token string">&quot;springApplicationArguments&quot;</span><span
                            class="token punctuation">,</span> applicationArguments<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>printedBanner <span
                            class="token operator">!=</span> <span class="token keyword">null</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
			beanFactory<span class="token punctuation">.</span><span
                            class="token function">registerSingleton</span><span class="token punctuation">(</span><span
                            class="token string">&quot;springBootBanner&quot;</span><span
                            class="token punctuation">,</span> printedBanner<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>beanFactory <span
                            class="token keyword">instanceof</span> <span class="token class-name">DefaultListableBeanFactory</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">(</span><span class="token punctuation">(</span><span
                            class="token class-name">DefaultListableBeanFactory</span><span
                            class="token punctuation">)</span> beanFactory<span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">setAllowBeanDefinitionOverriding</span><span
                            class="token punctuation">(</span><span class="token keyword">this</span><span
                            class="token punctuation">.</span>allowBeanDefinitionOverriding<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// Load the sources</span>
		<span class="token class-name">Set</span><span class="token generics"><span
                            class="token punctuation">&lt;</span><span class="token class-name">Object</span><span
                            class="token punctuation">&gt;</span></span> sources <span
                            class="token operator">=</span> <span class="token function">getAllSources</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span
                            class="token function">notEmpty</span><span class="token punctuation">(</span>sources<span
                            class="token punctuation">,</span> <span class="token string">&quot;Sources must not be empty&quot;</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">load</span><span class="token punctuation">(</span>context<span
                            class="token punctuation">,</span> sources<span class="token punctuation">.</span><span
                            class="token function">toArray</span><span class="token punctuation">(</span><span
                            class="token keyword">new</span> <span class="token class-name">Object</span><span
                            class="token punctuation">[</span><span class="token number">0</span><span
                            class="token punctuation">]</span><span class="token punctuation">)</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
		listeners<span class="token punctuation">.</span><span class="token function">contextLoaded</span><span
                            class="token punctuation">(</span>context<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                            class="line-number">10</span><br><span class="line-number">11</span><br><span
                            class="line-number">12</span><br><span class="line-number">13</span><br><span
                            class="line-number">14</span><br><span class="line-number">15</span><br><span
                            class="line-number">16</span><br><span class="line-number">17</span><br><span
                            class="line-number">18</span><br><span class="line-number">19</span><br><span
                            class="line-number">20</span><br><span class="line-number">21</span><br><span
                            class="line-number">22</span><br><span class="line-number">23</span><br><span
                            class="line-number">24</span><br><span class="line-number">25</span><br><span
                            class="line-number">26</span><br><span class="line-number">27</span><br><span
                            class="line-number">28</span><br><span class="line-number">29</span><br><span
                            class="line-number">30</span><br><span class="line-number">31</span><br></div>
                </div>
                <p>7.1: 从<code>initializers</code>集合中遍历所有的<code>ApplicationContextInitializer</code>，并通过<code>initializer.initialize()</code>方法初始化
                </p>
                <p>7.2：回调<code>SpringApplicationRunListener</code>对象的<code>contextPrepared()</code>方法，表示容器已准备</p>
                <p>&lt;8&gt;:<code>refreshContext(context)</code></p>
                <p>刷新容器，初始化ioc容器，向容器中加入配置类、组件，并且可以出发自动配置功能，具体原理可以参考SpringBoot的自动配置原理和Spring注解版容器的加载</p>
                <p>&lt;9&gt;: <code>afterRefresh(context, applicationArguments);</code></p>
                <p>执行Spring容器初始化的后置处理，默认为空</p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">public</span> <span class="token keyword">class</span> <span
                        class="token class-name">SpringApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">afterRefresh</span><span
                            class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> context<span
                            class="token punctuation">,</span>
			<span class="token class-name">ApplicationArguments</span> args<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br></div>
                </div>
                <p>&lt;10&gt;: <code>listeners.started(context);</code></p>
                <p>回调所有的<code>SpringApplicationRunListener</code>对象的<code>started()</code>方法</p>
                <p>&lt;11&gt;: <code>callRunners(context, applicationArguments)</code></p>
                <div class="language-java line-numbers-mode"><pre class="language-java"><code><span
                        class="token keyword">public</span> <span class="token keyword">class</span> <span
                        class="token class-name">SpringApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">callRunners</span><span
                            class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span
                            class="token punctuation">,</span> <span
                            class="token class-name">ApplicationArguments</span> args<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span
                            class="token punctuation">&lt;</span><span class="token class-name">Object</span><span
                            class="token punctuation">&gt;</span></span> runners <span
                            class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">ArrayList</span><span class="token generics"><span
                            class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		runners<span class="token punctuation">.</span><span class="token function">addAll</span><span
                            class="token punctuation">(</span>context<span class="token punctuation">.</span><span
                            class="token function">getBeansOfType</span><span class="token punctuation">(</span><span
                            class="token class-name">ApplicationRunner</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">)</span><span class="token punctuation">.</span><span
                            class="token function">values</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		runners<span class="token punctuation">.</span><span class="token function">addAll</span><span
                            class="token punctuation">(</span>context<span class="token punctuation">.</span><span
                            class="token function">getBeansOfType</span><span class="token punctuation">(</span><span
                            class="token class-name">CommandLineRunner</span><span
                            class="token punctuation">.</span><span class="token keyword">class</span><span
                            class="token punctuation">)</span><span class="token punctuation">.</span><span
                            class="token function">values</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token class-name">AnnotationAwareOrderComparator</span><span
                            class="token punctuation">.</span><span class="token function">sort</span><span
                            class="token punctuation">(</span>runners<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> runner <span
                            class="token operator">:</span> <span class="token keyword">new</span> <span
                            class="token class-name">LinkedHashSet</span><span class="token generics"><span
                            class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span
                            class="token punctuation">(</span>runners<span class="token punctuation">)</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>runner <span
                            class="token keyword">instanceof</span> <span
                            class="token class-name">ApplicationRunner</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">callRunner</span><span class="token punctuation">(</span><span
                            class="token punctuation">(</span><span
                            class="token class-name">ApplicationRunner</span><span class="token punctuation">)</span> runner<span
                            class="token punctuation">,</span> args<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>runner <span
                            class="token keyword">instanceof</span> <span
                            class="token class-name">CommandLineRunner</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">callRunner</span><span class="token punctuation">(</span><span
                            class="token punctuation">(</span><span
                            class="token class-name">CommandLineRunner</span><span class="token punctuation">)</span> runner<span
                            class="token punctuation">,</span> args<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                    <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span
                            class="line-number">2</span><br><span class="line-number">3</span><br><span
                            class="line-number">4</span><br><span class="line-number">5</span><br><span
                            class="line-number">6</span><br><span class="line-number">7</span><br><span
                            class="line-number">8</span><br><span class="line-number">9</span><br><span
                            class="line-number">10</span><br><span class="line-number">11</span><br><span
                            class="line-number">12</span><br><span class="line-number">13</span><br><span
                            class="line-number">14</span><br><span class="line-number">15</span><br><span
                            class="line-number">16</span><br></div>
                </div>
                <p>
                    调用<code>ApplicationRunner</code>或者<code>CommandLineRunner</code>的运行方法，其中<code>ApplicationRunner</code>的优先级要比<code>CommandLineRunner</code>要高。
                    在我们日常的项目里，经常需要初始化一些资源，比如线程池或者数据库数据等，我们就可以实现这两个接口，在实现方法里写具体的处理逻辑，
                    也可以在实现类上加上<code>@Order(value)</code>注解来指定优先级(ps:该实现类要加上@Component)</p>
                <p>&lt;12&gt;:<code>listeners.running(context);</code></p>
                <p>回调所有<code>SpringApplicationRunListener</code>对象的<code>running()</code>方法</p>
                <p>&lt;13&gt;:<code>return context</code>返回容器</p></div>
            <footer class="page-edit"><!---->
                <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/2/2020, 9:50:13 AM</span>
                </div>
            </footer>
            <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/learning/springboot/helloWorld.html" class="prev">
        HelloWorld
      </a></span> <span class="next"><a href="/learning/springboot/yaml.html">
        yaml
      </a>
      →
    </span></p></div>
        </main>
    </div>
    <div class="global-ui"><!----></div>
</div>
<script src="/assets/js/app.6dee105b.js" defer></script>
<script src="/assets/js/2.aa41c1d8.js" defer></script>
<script src="/assets/js/19.4de0eb66.js" defer></script>
</body>
</html>
